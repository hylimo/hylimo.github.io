import{d as C,p3 as N,tc as z,n as F,o as v,dd as r,iU as I,td as B,cR as K,te as y,h_ as U,iN as Y,iO as q,ta as t,bN as b,d$ as P,hA as O,hB as W,qv as S,kC as M,kJ as J,_ as x,K as h,cA as $,ag as _,bR as j,f as X,cG as Z,kP as Q,jb as ee,tf as te,eb as ie,qZ as oe,ot as L,cb as se}from"./lspPlugin.Dc7u3h4q.js";import{E as ne}from"./fileCommands._save.C8lgyWlu.js";var w;class re{constructor(){this.selectedEditors=[],this.isSelected=()=>!1,this.setSelection=t,this.isTransient=()=>!1,this.windowId=b.vscodeWindowId,this.createEditorActions=t,this.onDidFocus=r.None,this.onDidOpenEditorFail=r.None,this.whenRestored=Promise.resolve(),this.disposed=!1,this.setActive=t,this.notifyIndexChanged=t,this.relayout=t,this.dispose=t,this.toJSON=t,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChange=r.None,this.layout=t,this.onDidModelChange=r.None,this.onWillDispose=r.None,this.onDidActiveEditorChange=r.None,this.onWillCloseEditor=r.None,this.onDidCloseEditor=r.None,this.onWillMoveEditor=r.None,this.onWillOpenEditor=r.None,this.id=0,this.index=0,this.label="main",this.ariaLabel="main",this.activeEditorPane=void 0,this.activeEditor=null,this.previewEditor=null,this.count=0,this.isEmpty=!1,this.isLocked=!1,this.stickyCount=0,this.editors=[],this.getEditors=()=>[],this.findEditors=()=>[],this.getEditorByIndex=()=>{},this.getIndexOfEditor=t,this.openEditor=t,this.openEditors=t,this.isPinned=()=>!1,this.isSticky=()=>!1,this.isActive=()=>!1,this.contains=()=>!1,this.moveEditor=t,this.moveEditors=t,this.copyEditor=t,this.copyEditors=t,this.closeEditor=t,this.closeEditors=t,this.closeAllEditors=t,this.replaceEditors=t,this.pinEditor=()=>{},this.stickEditor=()=>{},this.unstickEditor=()=>{},this.lock=()=>{},this.isFirst=t,this.isLast=t}get groupsView(){return t()}notifyLabelChanged(){}get titleHeight(){return t()}get element(){return t()}get scopedContextKeyService(){return C.get(P)}focus(){}}const de=new re;class V{constructor(i,u){this.input=i,this.editor=u,this.onDidChangeControl=r.None,this.onDidChangeSizeConstraints=r.None,this.onDidFocus=r.None,this.onDidBlur=r.None,this.options=void 0,this.group=de,this.scopedContextKeyService=void 0,this.getViewState=t,this.isVisible=t,this.hasFocus=t,this.getId=t,this.getTitle=t,this.focus=t}get minimumWidth(){return O.width}get maximumWidth(){return W.width}get minimumHeight(){return O.height}get maximumHeight(){return W.height}getControl(){return this.editor}}function ae(E,i,u){async function c(a,e,l){const g=I(a)?e:a.options;B(e)&&(l=e);const n=K(a)||I(a)?a.resource:void 0;if(n==null||!E.canHandleResource(n))return await i(a,e,l);let s;if(s=C.get(N).listCodeEditors().find(d=>d instanceof y&&d.getModel()!=null&&d.getModel().uri.toString()===n.toString()),s==null){const d=await i(a,e,l);if(d!=null)return d;const p=await E.createModelReference(n);if(s=await u?.(p,g,l===U),s==null){p.dispose();return}}return g!=null&&Y(g,s,q.Immediate),(g?.preserveFocus??!1)||(s.focus(),s.getContainerDomNode().scrollIntoView()),new V(I(a)?a:void 0,s)}return c}let T=class extends ne{constructor(i,u,c,a,e,l,g,n,s,o,d,p,f){super(void 0,c,a,e,l,g,n,s,o,d,p),this._isEditorPartVisible=u,this.openEditor=ae(f,this.openEditor.bind(this),i)}get activeTextEditorControl(){const i=C.get(N).getFocusedCodeEditor();return i!=null&&i instanceof z?i:super.activeTextEditorControl}async openEditor(i,u,c){if(this._isEditorPartVisible())return await super.openEditor(i,u,c)}};T=x([h(2,$),h(3,_),h(4,j),h(5,X),h(6,Z),h(7,Q),h(8,ee),h(9,te),h(10,ie),h(11,oe),h(12,L)],T);class k{constructor(i,u,c){this.editor=i,this.input=u,this.group=c,this.onDidChangeControl=r.None,this.options=void 0,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChangeSizeConstraints=r.None,this.scopedContextKeyService=void 0,this.onDidFocus=this.editor.onDidFocusEditorWidget,this.onDidBlur=this.editor.onDidBlurEditorWidget}getControl(){return this.editor}getViewState(){}isVisible(){return!0}hasFocus(){return this.editor.hasWidgetFocus()}getId(){return this.editor.getId()}getTitle(){}focus(){this.editor.focus()}}let G=w=class extends F{constructor(i,u,c,a,e,l){super(),this.editor=i,this.openEditorFallback=u,this.scopedContextKeyService=a,this.editorService=e,this.textModelService=l,this.active=!1,this.selectedEditors=[],this.isSelected=()=>!1,this.setSelection=t,this.isTransient=()=>!1,this.windowId=b.vscodeWindowId,this.onDidFocus=this.editor.onDidFocusEditorWidget,this.onDidOpenEditorFail=r.None,this.whenRestored=Promise.resolve(),this.disposed=!1,this.notifyIndexChanged=t,this.relayout=t,this.toJSON=t,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChange=this.editor.onDidLayoutChange,this.layout=()=>this.editor.layout(),this._onDidModelChange=new v,this.onDidModelChange=this._onDidModelChange.event,this.onWillDispose=this.editor.onDidDispose,this._onDidActiveEditorChange=new v,this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this.onWillCloseEditor=r.None,this._onDidCloseEditor=new v,this.onDidCloseEditor=this._onDidCloseEditor.event,this.onWillMoveEditor=r.None,this._onWillOpenEditor=new v,this.onWillOpenEditor=this._onWillOpenEditor.event,this.id=--w.idCounter,this.index=-1,this.label=`standalone editor ${-this.id}`,this.ariaLabel=`standalone editor ${-this.id}`,this.previewEditor=null,this.isLocked=!0,this.stickyCount=0,this.getEditors=()=>this.editors,this.findEditors=o=>this.pane!=null&&o.toString()===this.pane.input.resource.toString()?[this.pane.input]:[],this.getEditorByIndex=o=>this.pane!=null&&o===0?this.pane.input:void 0,this.getIndexOfEditor=o=>this.pane!=null&&this.pane.input===o?0:-1,this.openEditor=async(o,d)=>{if(!o.isDisposed()&&o instanceof S){if(o.resource.toString()===this.pane?.input.resource.toString())return this.focus(),this.pane;if(this.openEditorFallback!=null){const p=await this.textModelService.createModelReference(o.resource),f=await this.openEditorFallback(p,d,!1);if(f==null){p.dispose();return}return new V(o,f)}}},this.openEditors=async o=>{if(o.length===1)return await this.openEditor(o[0].editor)},this.isPinned=()=>!1,this.isSticky=()=>!1,this.isActive=()=>this.editor.hasWidgetFocus(),this.contains=o=>this.pane!=null&&this.pane.input===o,this.moveEditor=t,this.moveEditors=t,this.copyEditor=t,this.copyEditors=t,this.closeEditor=t,this.closeEditors=t,this.closeAllEditors=t,this.replaceEditors=t,this.pinEditor=()=>{},this.stickEditor=()=>{},this.unstickEditor=()=>{},this.lock=()=>{},this.isFirst=t,this.isLast=t;const g=o=>{const d=c.createInstance(S,o,void 0,void 0,void 0,void 0);this._onWillOpenEditor.fire({editor:d,groupId:this.id}),this.pane=new k(i,d,this),this._onDidModelChange.fire({kind:M.EDITOR_OPEN,editor:d,editorIndex:0}),this._onDidActiveEditorChange.fire({editor:d})},n=o=>{if(this.pane!=null&&this.pane.input.resource.toString()===o.toString()){const d=this.pane;this.pane=void 0,this._onDidModelChange.fire({kind:M.EDITOR_CLOSE,editorIndex:0}),this._onDidActiveEditorChange.fire({editor:void 0}),this._onDidCloseEditor.fire({context:J.UNKNOWN,editor:d.input,groupId:this.id,index:0,sticky:!1})}};i.onDidChangeModel(o=>{o.oldModelUrl!=null&&n(o.oldModelUrl),o.newModelUrl!=null&&g(o.newModelUrl)}),this._register({dispose:()=>{const o=i.getModel();o!=null&&n(o.uri)}});const s=i.getModel();if(s!=null){const o=c.createInstance(S,s.uri,void 0,void 0,void 0,void 0);this.pane=new k(i,o,this)}}get groupsView(){return t()}notifyLabelChanged(){}createEditorActions(){return{actions:{primary:[],secondary:[]},onDidChange:r.None}}get titleHeight(){return t()}setActive(i){this.active=i}get element(){return this.editor.getContainerDomNode()}get activeEditorPane(){return this.pane}get activeEditor(){return this.pane?.input??null}get count(){return this.pane!=null?1:0}get isEmpty(){return this.pane==null}get editors(){return this.pane!=null?[this.pane.input]:[]}focus(){this.editor.focus(),this.editor.getContainerDomNode().scrollIntoView()}};G.idCounter=0;G=w=x([h(2,_),h(3,P),h(4,se),h(5,L)],G);let R=class extends F{constructor(i,u,c,a){super(),this.delegate=i,this.openEditorFallback=c,this.instantiationService=a,this._serviceBrand=void 0,this.additionalGroups=[],this.activeGroupOverride=void 0,this.onDidCreateAuxiliaryEditorPart=this.delegate.onDidCreateAuxiliaryEditorPart,this.onDidChangeGroupMaximized=this.delegate.onDidChangeGroupMaximized,this._onDidChangeActiveGroup=new v,this.onDidChangeActiveGroup=r.any(this._onDidChangeActiveGroup.event,this.delegate.onDidChangeActiveGroup),this._onDidAddGroup=new v,this.onDidAddGroup=r.any(this._onDidAddGroup.event,this.delegate.onDidAddGroup),this._onDidRemoveGroup=new v,this.onDidRemoveGroup=r.any(this._onDidRemoveGroup.event,this.delegate.onDidRemoveGroup),this.onDidMoveGroup=this.delegate.onDidMoveGroup,this.onDidActivateGroup=this.delegate.onDidActivateGroup,this.onDidChangeGroupIndex=this.delegate.onDidChangeGroupIndex,this.onDidChangeGroupLocked=this.delegate.onDidChangeGroupLocked,this.getLayout=()=>this.delegate.getLayout(),this.getGroups=e=>[...this.delegate.getGroups(e),...this.additionalGroups],this.getGroup=e=>this.delegate.getGroup(e)??this.additionalGroups.find(l=>l.id===e),this.activateGroup=(...e)=>this.delegate.activateGroup(...e),this.getSize=(...e)=>this.delegate.getSize(...e),this.setSize=(...e)=>this.delegate.setSize(...e),this.arrangeGroups=(...e)=>this.delegate.arrangeGroups(...e),this.applyLayout=(...e)=>this.delegate.applyLayout(...e),this.setGroupOrientation=(...e)=>this.delegate.setGroupOrientation(...e),this.findGroup=(...e)=>this.delegate.findGroup(...e),this.addGroup=(...e)=>this.delegate.addGroup(...e),this.removeGroup=(...e)=>this.delegate.removeGroup(...e),this.moveGroup=(...e)=>this.delegate.moveGroup(...e),this.mergeGroup=(...e)=>this.delegate.mergeGroup(...e),this.mergeAllGroups=(...e)=>this.delegate.mergeAllGroups(...e),this.copyGroup=(...e)=>this.delegate.copyGroup(...e),this.onDidChangeEditorPartOptions=this.delegate.onDidChangeEditorPartOptions,this.enforcePartOptions=(...e)=>this.delegate.enforcePartOptions(...e),setTimeout(()=>{const e=C.get(N),l=n=>{if(n instanceof y){let s;const o=m=>{const D=m!=null?this.additionalGroups.find(H=>H.editor===m):void 0;this.activeGroupOverride!==D&&(this.activeGroupOverride=D,this._onDidChangeActiveGroup.fire(this.activeGroup))},d=m=>{!u&&this.activeGroupOverride===this.additionalGroups.find(D=>D.editor===m)&&o(void 0)},p=()=>{s!=null&&window.clearTimeout(s),o(n)},f=()=>{s!=null&&window.clearTimeout(s),s=window.setTimeout(()=>{s=void 0,d(n)},100)};n.onDidDispose(()=>{d(n)}),n.onDidFocusEditorText(p),n.onDidFocusEditorWidget(p),n.onDidBlurEditorText(f),n.onDidBlurEditorWidget(f),n.hasWidgetFocus()&&p();const A=a.createInstance(G,n,this.openEditorFallback);this.additionalGroups.push(A),this._onDidAddGroup.fire(A)}},g=n=>{if(n instanceof y){const s=this.additionalGroups.find(o=>o.editor===n);s!=null&&(s.dispose(),this.activeGroupOverride===s&&(this.activeGroupOverride=void 0,this._onDidChangeActiveGroup.fire(this.activeGroup)),this.additionalGroups=this.additionalGroups.filter(o=>o!==s),this._onDidRemoveGroup.fire(s))}};this._register(e.onCodeEditorAdd(l)),this._register(e.onCodeEditorRemove(g)),e.listCodeEditors().forEach(l)})}getScopedInstantiationService(){return this.instantiationService}registerContextKeyProvider(i){return this.delegate.registerContextKeyProvider(i)}saveWorkingSet(i){return this.delegate.saveWorkingSet(i)}getWorkingSets(){return this.delegate.getWorkingSets()}applyWorkingSet(i){return this.delegate.applyWorkingSet(i)}deleteWorkingSet(i){return this.delegate.deleteWorkingSet(i)}get isReady(){return this.delegate.isReady}get whenReady(){return this.delegate.whenReady}get whenRestored(){return this.delegate.whenRestored}get hasRestorableState(){return this.delegate.hasRestorableState}get parts(){return this.delegate.parts}createAuxiliaryEditorPart(i){return this.delegate.createAuxiliaryEditorPart(i)}get mainPart(){return this.delegate.mainPart}getPart(i){return this.delegate.getPart(i)}toggleMaximizeGroup(i){return this.delegate.toggleMaximizeGroup(i)}toggleExpandGroup(i){return this.delegate.toggleExpandGroup(i)}createEditorDropTarget(i,u){return this.delegate.createEditorDropTarget(i,u)}get groups(){return[...this.additionalGroups,...this.delegate.groups]}get activeGroup(){return this.activeGroupOverride??this.delegate.activeGroup}get sideGroup(){return this.delegate.sideGroup}get count(){return this.delegate.count+this.additionalGroups.length}get orientation(){return this.delegate.orientation}get partOptions(){return this.delegate.partOptions}};R=x([h(3,_)],R);export{T as M,R as a,de as f};
